
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

âœ“ Common agricultural ingredients initialized
Development mode: returning admin user info: {
  id: '44886248',
  email: 'tim@avallen.solutions',
  firstName: 'Tim',
  lastName: 'Admin',
  profileImageUrl: '',
  role: 'admin'
}
Development mode: returning admin user info: {
  id: '44886248',
  email: 'tim@avallen.solutions',
  firstName: 'Tim',
  lastName: 'Admin',
  profileImageUrl: '',
  role: 'admin'
}
Development mode: returning admin user info: {
  id: '44886248',
  email: 'tim@avallen.solutions',
  firstName: 'Tim',
  lastName: 'Admin',
  profileImageUrl: '',
  role: 'admin'
}
isAuthenticated middleware check for: /api/company/footprint {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
isAuthenticated middleware check for: /api/suggestions/next-steps {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
isAuthenticated middleware check for: /api/company/footprint/scope3/automated {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
isAuthenticated middleware check for: /api/dashboard/metrics {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
Products fetched: 3 for company 1
Using admin company with products: Demo Company ID: 1
Using admin company with products: Demo Company ID: 1
Using admin company with products: Demo Company ID: 1
Using admin company with products: Demo Company ID: 1
ğŸ” Getting suggestions for company 1
ğŸ¢ Using company ID 1 for automated calculations
ğŸ” Calculating purchased goods for company 1
ğŸ” Calculating purchased goods for company 1
ğŸ“¦ Found 3 products for emissions calculation
ğŸ§® Processing product: Koko (ID: 15)
ğŸ§® Calculating OpenLCA-based emissions for Koko
ğŸ“‹ Found 2 ingredients
ğŸ“¦ Found 3 products for emissions calculation
ğŸ§® Processing product: Koko (ID: 15)
ğŸ§® Calculating OpenLCA-based emissions for Koko
ğŸ“‹ Found 2 ingredients
ğŸŒ± OpenLCA Molasses, cane: 1.8 l = 1.602 kg CO2e
isAuthenticated middleware check for: /api/dashboard/kpis {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
isAuthenticated middleware check for: /api/smart-goals {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
ğŸŒ± OpenLCA Molasses, cane: 1.8 l = 1.602 kg CO2e
âš ï¸ Fallback Coconut extract: 3 ml = 1.5 kg CO2e
ğŸ¾ Glass bottle: 530.000g, 61.00% recycled = 0.258 kg CO2e
âš ï¸ Fallback Coconut extract: 3 ml = 1.5 kg CO2e
ğŸ¾ Glass bottle: 530.000g, 61.00% recycled = 0.258 kg CO2e
ğŸ’¾ Stored carbon footprint for Koko: 3.360 kg CO2e
ğŸ“Š Koko per-unit emissions: 3.360 kg CO2e per unit
ğŸ­ Koko annual production: 0 units
ğŸŒ Koko total annual emissions: 0.0 tonnes CO2e
ğŸ§® Processing product: Dark Spiced ecoSPIRITS (ID: 14)
ğŸ§® Calculating OpenLCA-based emissions for Dark Spiced ecoSPIRITS
ğŸ“‹ Found 1 ingredients
ğŸ“Š Dark Spiced ecoSPIRITS per-unit emissions: 0.000 kg CO2e per unit
ğŸ­ Dark Spiced ecoSPIRITS annual production: 0 units
ğŸŒ Dark Spiced ecoSPIRITS total annual emissions: 0.0 tonnes CO2e
ğŸ§® Processing product: Rum Blanc (ID: 12)
ğŸ§® Calculating OpenLCA-based emissions for Rum Blanc
ğŸ“‹ Found 1 ingredients
ğŸ“‹ Generated 1 suggestions: [ 'Enhance Your Sustainability Reporting' ]
Using admin company with products: Demo Company ID: 1
Using admin company with products: Demo Company ID: 1
ğŸ’¾ Stored carbon footprint for Koko: 3.360 kg CO2e
ğŸ“Š Koko per-unit emissions: 3.360 kg CO2e per unit
ğŸ­ Koko annual production: 0 units
ğŸŒ Koko total annual emissions: 0.0 tonnes CO2e
ğŸ§® Processing product: Dark Spiced ecoSPIRITS (ID: 14)
ğŸ§® Calculating OpenLCA-based emissions for Dark Spiced ecoSPIRITS
ğŸ“‹ Found 1 ingredients
ğŸ“Š Dark Spiced ecoSPIRITS per-unit emissions: 0.000 kg CO2e per unit
ğŸ­ Dark Spiced ecoSPIRITS annual production: 0 units
ğŸŒ Dark Spiced ecoSPIRITS total annual emissions: 0.0 tonnes CO2e
ğŸ§® Processing product: Rum Blanc (ID: 12)
ğŸ§® Calculating OpenLCA-based emissions for Rum Blanc
ğŸ“‹ Found 1 ingredients
isAuthenticated middleware check for: /api/company/water-footprint {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
ğŸŒ± OpenLCA Molasses, cane: 1.5 kg = 1.335 kg CO2e
ğŸ¾ Glass bottle: 530.000g, 61.00% recycled = 0.258 kg CO2e
ğŸŒ± OpenLCA Molasses, cane: 1.5 kg = 1.335 kg CO2e
ğŸ¾ Glass bottle: 530.000g, 61.00% recycled = 0.258 kg CO2e
ğŸ’¾ Stored carbon footprint for Rum Blanc: 1.593 kg CO2e
ğŸ“Š Rum Blanc per-unit emissions: 1.593 kg CO2e per unit
ğŸ­ Rum Blanc annual production: 300,000 units
ğŸŒ Rum Blanc total annual emissions: 477.9 tonnes CO2e
ğŸ’¾ Stored carbon footprint for Rum Blanc: 1.593 kg CO2e
ğŸ“Š Rum Blanc per-unit emissions: 1.593 kg CO2e per unit
ğŸ­ Rum Blanc annual production: 300,000 units
ğŸŒ Rum Blanc total annual emissions: 477.9 tonnes CO2e
Using admin company with products: Demo Company ID: 1
ğŸ“ˆ Production dashboard metrics (FootprintWizard method):
   CO2e: 500.04 tonnes (500044.8 kg)
   Water: 0 litres
   Waste: 0.0 tonnes
isAuthenticated middleware check for: /api/reports {
  isAuthenticated: true,
  hasUser: true,
  hasExpiresAt: true,
  userObject: [ 'claims', 'expires_at', 'access_token', 'refresh_token' ]
}
Development mode: Creating mock user for testing
ğŸŒ± OpenLCA water footprint for Molasses, cane: 46.800000000000004L
ğŸŒ± OpenLCA carbon footprint for Molasses, cane: 1.602 kg CO2e
Using admin company with products: Demo Company ID: 1
ğŸŒ± OpenLCA water footprint for Molasses, cane: 39L
ğŸŒ± OpenLCA carbon footprint for Molasses, cane: 1.335 kg CO2e
Admin conversations endpoint called with params: { search: undefined, status: undefined, limit: '1', offset: 0 }
ğŸ“¨ Found 1 internal messages for admin view
ğŸ“¨ Transformed 1 internal messages for admin dashboard
ğŸ“¨ Total conversations for admin: 6 (1 internal + 5 traditional)
Admin conversations endpoint called with params: { search: undefined, status: undefined, limit: 50, offset: 0 }
ğŸ“¨ Found 2 internal messages for admin view
ğŸ“¨ Transformed 2 internal messages for admin dashboard
ğŸ“¨ Total conversations for admin: 7 (2 internal + 5 traditional)
Admin conversations endpoint called with params: { search: undefined, status: undefined, limit: 50, offset: 0 }
ğŸ“¨ Found 2 internal messages for admin view
ğŸ“¨ Transformed 2 internal messages for admin dashboard
ğŸ“¨ Total conversations for admin: 7 (2 internal + 5 traditional)
Admin conversations endpoint called with params: { search: undefined, status: undefined, limit: 50, offset: 0 }
ğŸ“¨ Found 2 internal messages for admin view
ğŸ“¨ Transformed 2 internal messages for admin dashboard
ğŸ“¨ Total conversations for admin: 7 (2 internal + 5 traditional)
Admin conversations endpoint called with params: { search: undefined, status: undefined, limit: 50, offset: 0 }
ğŸ“¨ Found 2 internal messages for admin view
ğŸ“¨ Transformed 2 internal messages for admin dashboard
ğŸ“¨ Total conversations for admin: 7 (2 internal + 5 traditional)