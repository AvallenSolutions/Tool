<!DOCTYPE html>
<html>
<head>
    <title>Final Image Test</title>
</head>
<body>
    <h1>Final Image Loading Test</h1>
    
    <h2>Method 1: API Route (should work)</h2>
    <img src="/api/image/uploads/4b45c9c2-e36f-427a-b777-be3b283b1b74" 
         style="max-width: 300px; border: 2px solid red;" 
         onload="this.style.borderColor='green'; document.getElementById('result1').innerHTML='SUCCESS: API route works!'" 
         onerror="this.style.borderColor='red'; document.getElementById('result1').innerHTML='FAILED: API route failed'">
    <p id="result1">Loading...</p>
    
    <h2>Method 2: Direct Server (port 5000)</h2>
    <img src="http://localhost:5000/api/image/uploads/4b45c9c2-e36f-427a-b777-be3b283b1b74" 
         style="max-width: 300px; border: 2px solid blue;" 
         onload="this.style.borderColor='green'; document.getElementById('result2').innerHTML='SUCCESS: Direct server works!'" 
         onerror="this.style.borderColor='blue'; document.getElementById('result2').innerHTML='FAILED: Direct server failed'">
    <p id="result2">Loading...</p>
    
    <script>
        console.log('Testing both image loading methods...');
        
        // Test API call directly
        fetch('/api/image/uploads/4b45c9c2-e36f-427a-b777-be3b283b1b74')
            .then(response => {
                console.log('API fetch response:', response.status, response.statusText);
                return response.blob();
            })
            .then(blob => {
                console.log('API blob type:', blob.type, 'size:', blob.size);
            })
            .catch(error => {
                console.error('API fetch error:', error);
            });
    </script>
</body>
</html>